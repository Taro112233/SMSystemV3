// prisma/schemas/audit.prisma
// ===== STREAMLINED AUDIT SYSTEM - InvenStock V2.0 =====

// Single Audit Model - Hybrid Approach
model AuditLog {
  id             String @id @default(cuid())
  organizationId String
  userId         String?
  
  // Action Tracking (Dot Notation)
  action         String      // "products.create", "transfers.approve", "users.login"
  resourceId     String?     // ID of affected record
  
  // Smart Payload Storage
  payload        Json?       // Context-aware data based on action type
  
  // Timestamp
  createdAt      DateTime @default(now())
  
  // Relations
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  user           User? @relation(fields: [userId], references: [id])
  
  // Optimized Indexes
  @@index([organizationId, createdAt])
  @@index([action])
  @@index([resourceId])
  @@map("audit_logs")
}